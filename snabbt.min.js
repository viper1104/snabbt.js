!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.snabbt=t()}}(function(){return function(){function t(n,e,i){function r(a,s){if(!e[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[a]={exports:{}};n[a][0].call(f.exports,function(t){var e=n[a][1][t];return r(e||t)},f,f.exports,t,n,e,i)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}return t}()({1:[function(t,n,e){!function(t){if(!Array.prototype.find){var n=function(t){var n=Object(this),e=n.length<0?0:n.length>>>0;if(0===e)return void 0;if("function"!=typeof t||"[object Function]"!==Object.prototype.toString.call(t))throw new TypeError("Array#find: predicate must be a function");for(var i,r=arguments[1],o=0;e>o;o++)if(i=n[o],t.call(r,i,o,n))return i;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:n,configurable:!0,enumerable:!1,writable:!0})}catch(e){}Array.prototype.find||(Array.prototype.find=n)}}(this)},{}],2:[function(t,n,e){"use strict";function i(t,n,e,i){var r=o.optionOrDefault(e.duration,500),u=o.optionOrDefault(e.delay,0),c=a.createEaser(o.optionOrDefault(e.easing,"linear"),e),f=0===r?n.clone():t.clone();f.transformOrigin=e.transformOrigin,f.perspective=e.perspective;var p=-1,l=0,h=!1,m=u/r,d=e.manual,v=0,g=void 0,A=void 0;return A=e.valueFeeder?s.createValueFeederTweener(e.valueFeeder,t,n,f):s.createStateTweener(t,n,f),{options:e,endState:function(){return n},finish:function(t){d=!1;var n=r*v;p=l-n,g=t,c.resetFrom(v)},rollback:function(t){d=!1,A.setReverse();var n=r*(1-v);p=l-n,g=t,c.resetFrom(v)},tick:function(t){if(d)return l=t,this.updateCurrentTransform();if(-1===p&&(p=t),t-p>=u){!h&&e.start&&e.start(),h=!0,l=t-u;var n=Math.min(Math.max(0,l-p),r);c.tick(0===r?1:n/r),this.updateCurrentTransform(),e.update&&e.update(n/r),this.completed()&&g&&g()}},getCurrentState:function(){return f},setValue:function(t){h=!0,v=Math.min(Math.max(t,1e-4),.9999+m)},updateCurrentTransform:function(){var t=c.getValue();if(d){var n=Math.max(1e-5,v-m);c.isSpring?t=n:(c.tick(n,!0),t=c.getValue())}A.tween(t)},completed:function(){return 0===p?!1:c.completed()},updateElement:function(t,n){if(h||n){var r=A.asMatrix(),a=A.getProperties();o.updateElementTransform(t,r,i,a.perspective,e.staticTransform),o.updateElementProperties(t,a)}}}}function r(t){var n=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var e=a.createSpringEasing(t),i=n.position,r=n.rotation,s=n.rotationPost,c=n.scale,f=n.skew,p=u.createState({position:i?[0,0,0]:void 0,rotation:r?[0,0,0]:void 0,rotationPost:s?[0,0,0]:void 0,scale:c?[1,1]:void 0,skew:f?[0,0]:void 0});return{options:function(){return t},tick:function(){e.equilibrium||(e.tick(),this.updateMovement())},updateMovement:function(){var t=e.getValue();i&&(p.position[0]=n.position[0]*t,p.position[1]=n.position[1]*t,p.position[2]=n.position[2]*t),r&&(p.rotation[0]=n.rotation[0]*t,p.rotation[1]=n.rotation[1]*t,p.rotation[2]=n.rotation[2]*t),s&&(p.rotationPost[0]=n.rotationPost[0]*t,p.rotationPost[1]=n.rotationPost[1]*t,p.rotationPost[2]=n.rotationPost[2]*t),c&&(p.scale[0]=1+n.scale[0]*t,p.scale[1]=1+n.scale[1]*t),f&&(p.skew[0]=n.skew[0]*t,p.skew[1]=n.skew[1]*t)},updateElement:function(t){o.updateElementTransform(t,p.asMatrix()),o.updateElementProperties(t,p.getProperties())},getCurrentState:function(){return p},completed:function(){return e.completed()}}}var o=t("./utils.js"),a=t("./easing.js"),s=t("./tweeners"),u=t("./state.js");n.exports={createAnimation:i,createAttentionAnimation:r}},{"./easing.js":3,"./state.js":8,"./tweeners":9,"./utils.js":10}],3:[function(t,n,e){"use strict";function i(t){return t}function r(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2}function o(t){return t*t}function a(t){return-Math.pow(t-1,2)+1}function s(t,n){if("spring"===t)return c(n);var e=t;u.isFunction(t)||(e=f[t]);var i,r=e,o=0;return{tick:function(t){o=r(t),i=t},resetFrom:function(){i=0},getValue:function(){return o},completed:function(){return i>=1?i:!1}}}var u=t("./utils.js"),c=function(t){var n=u.optionOrDefault(t.startPosition,0),e=u.optionOrDefault(t.equilibriumPosition,1),i=u.optionOrDefault(t.initialVelocity,0),r=u.optionOrDefault(t.springConstant,.8),o=u.optionOrDefault(t.springDeceleration,.9),a=u.optionOrDefault(t.springMass,10),s=!1;return{isSpring:!0,tick:function(t,u){if(0!==t&&!u&&!s){var c=-(n-e)*r,f=c/a;i+=f,n+=i,i*=o,Math.abs(n-e)<.001&&Math.abs(i)<.001&&(s=!0)}},resetFrom:function(t){n=t,i=0},getValue:function(){return s?e:n},completed:function(){return s}}},f={linear:i,ease:r,easeIn:o,easeOut:a};n.exports={createEaser:s,createSpringEasing:c}},{"./utils.js":10}],4:[function(t,n,e){"use strict";var i=t("./state.js").stateFromOptions,r=t("./animation.js"),o=t("./state.js").createState,a=t("./utils.js"),s={runningAnimations:[],completedAnimations:[],transformProperty:"transform",rAFScheduled:!1,init:function(){if(void 0===typeof window){var t=window.getComputedStyle(document.documentElement,""),n=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];"webkit"===n&&(this.transformProperty="webkitTransform")}},scheduleNextFrame:function(){var t=this;this.rAFScheduled||(this.rAFScheduled=!0,window.requestAnimationFrame(function(n){t.rAFScheduled=!1,t.stepAnimations(n)}))},stepAnimations:function(t){var n=this;this.runningAnimations.forEach(function(e){var i=e[0],r=e[1];n.stepAnimation(i,r,t)}),this.archiveCompletedAnimations(),this.runningAnimations.length>0&&this.scheduleNextFrame()},stepAnimation:function(t,n,e){n.tick(e),n.updateElement(t)},archiveCompletedAnimations:function(){var t=this.runningAnimations.filter(function(t){return!t[1].completed()}),n=this.runningAnimations.filter(function(t){return t[1].completed()}),e=this.createQueuedAnimations(n),i=n.filter(function(t){return!e.find(function(n){return n[0]!==t[0]})});s.runningAnimations=t,this.completedAnimations=this.completedAnimations.filter(function(t){return!i.find(function(n){return n[0]===t[0]})}),Array.prototype.push.apply(this.completedAnimations,i),Array.prototype.push.apply(this.runningAnimations,e),n.forEach(function(t){var n=t[1].options.complete;n&&n()})},createQueuedAnimations:function(t){var n=this,e=t.filter(function(t){var n=t[2];return n.index<n.queue.length}).map(function(t){var e=t[0],i=t[2],r=i.queue[i.index];return i.index++,[t[0],n.createAnimation(e,r,t[1].endState()),i]});return e},createChainer:function(){var t={index:0,queue:[],snabbt:function(n){return this.queue.push(n),t}};return t},createAnimation:function(t,n,e){var o=e||this.findCurrentState(t),a=i(n,o,!0),s=i(n,o,!1);this.runningAnimations=this.runningAnimations.filter(function(n){return t!==n[0]});var u=r.createAnimation(a,s,n,this.transformProperty);return u},createAttentionAnimation:function(t,n){var e=i(n,o({},!1));n.movement=e;var a=r.createAttentionAnimation(n);return a},stopAnimation:function(t){for(var n=[],e=[],i=0,r=this.runningAnimations.length;r>i;i++){var o=this.runningAnimations[i];o[0]===t?n.push(o):e.push(o)}this.runningAnimations=e,Array.prototype.push.apply(this.completedAnimations,n)},removeAnimation:function(t){this.completedAnimations=this.completedAnimations.filter(function(n){return n[0]!==t}),this.runningAnimations=this.runningAnimations.filter(function(n){return n[0]!==t})},initializeAnimation:function(t,n,e){var i=void 0;if("attention"===n)i=this.createAttentionAnimation(t,e);else if("stop"===n)return this.stopAnimation(t);if("remove"===n)return this.removeAnimation(t);i=this.createAnimation(t,n);var r=this.createChainer();return i.updateElement(t,!0),this.runningAnimations.push([t,i,r]),this.scheduleNextFrame(),n.manual?i:r},findCurrentState:function(t){var n=this.runningAnimations.find(function(n){return t===n[0]});return n?n[1].getCurrentState():(n=this.completedAnimations.find(function(n){return t===n[0]}),n?n[1].getCurrentState():void 0)},clearOphanedEndStates:function(){this.completedAnimations=this.completedAnimations.filter(function(t){return a.findUltimateAncestor(t[0]).body})}};n.exports=s},{"./animation.js":2,"./state.js":8,"./utils.js":10}],5:[function(t,n,e){"use strict";function i(t,n,e){if(!t.length)return"string"==typeof n?r.initializeAnimation(t,n,o(e,0,1)):r.initializeAnimation(t,o(n,0,1),e);for(var i=[],s={snabbt:function(t){var n=i.length;return i.forEach(function(e,i){e.snabbt(o(t,i,n))}),s},setValue:function(t){return i.forEach(function(n){n.setValue(t)}),s},finish:function(t){return i.forEach(function(n,e){return a.isFunction(t)?n.finish(function(){t(e,i.length)}):void n.finish()}),s},rollback:function(t){return i.forEach(function(n,e){return a.isFunction(t)?n.rollback(function(){t(e,i.length)}):void n.rollback()}),s}},u=0,c=t.length;c>u;++u)"string"==typeof n?i.push(r.initializeAnimation(t[u],n,o(e,u,c))):i.push(r.initializeAnimation(t[u],o(n,u,c),e));return s}t("array.prototype.find");var r=t("./engine.js"),o=t("./properties.js").preprocessOptions,a=t("./utils.js"),s=t("./matrix.js"),u=t("./utils.js").updateElementTransform;n.exports=function(t,n,e){return i(t,n,e)},n.exports.createMatrix=s,n.exports.setElementTransform=u,n.exports.sequence=function(t){var n=-1,e=function r(){if(++n,!(n>t.length-1)){var e=t[n][0],o=t[n][1],a=o.allDone;o.allDone=a?function(){a(),r()}:r,i(e,o)}};e()},"undefined"!=typeof window&&window.jQuery&&!function(t){t.fn.snabbt=function(t,n){return i(this.get(),t,n)}}(window.jQuery),r.init()},{"./engine.js":4,"./matrix.js":6,"./properties.js":7,"./utils.js":10,"array.prototype.find":1}],6:[function(t,n,e){"use strict";function i(t,n,e){return e[0]=t[0]*n[0]+t[1]*n[4]+t[2]*n[8]+t[3]*n[12],e[1]=t[0]*n[1]+t[1]*n[5]+t[2]*n[9]+t[3]*n[13],e[2]=t[0]*n[2]+t[1]*n[6]+t[2]*n[10]+t[3]*n[14],e[3]=t[0]*n[3]+t[1]*n[7]+t[2]*n[11]+t[3]*n[15],e[4]=t[4]*n[0]+t[5]*n[4]+t[6]*n[8]+t[7]*n[12],e[5]=t[4]*n[1]+t[5]*n[5]+t[6]*n[9]+t[7]*n[13],e[6]=t[4]*n[2]+t[5]*n[6]+t[6]*n[10]+t[7]*n[14],e[7]=t[4]*n[3]+t[5]*n[7]+t[6]*n[11]+t[7]*n[15],e[8]=t[8]*n[0]+t[9]*n[4]+t[10]*n[8]+t[11]*n[12],e[9]=t[8]*n[1]+t[9]*n[5]+t[10]*n[9]+t[11]*n[13],e[10]=t[8]*n[2]+t[9]*n[6]+t[10]*n[10]+t[11]*n[14],e[11]=t[8]*n[3]+t[9]*n[7]+t[10]*n[11]+t[11]*n[15],e[12]=t[12]*n[0]+t[13]*n[4]+t[14]*n[8]+t[15]*n[12],e[13]=t[12]*n[1]+t[13]*n[5]+t[14]*n[9]+t[15]*n[13],e[14]=t[12]*n[2]+t[13]*n[6]+t[14]*n[10]+t[15]*n[14],e[15]=t[12]*n[3]+t[13]*n[7]+t[14]*n[11]+t[15]*n[15],e}function r(t,n,e,i){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n,t[13]=e,t[14]=i,t[15]=1}function o(t,n){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(n),t[6]=-Math.sin(n),t[7]=0,t[8]=0,t[9]=Math.sin(n),t[10]=Math.cos(n),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function a(t,n){t[0]=Math.cos(n),t[1]=-Math.sin(n),t[2]=0,t[3]=0,t[4]=Math.sin(n),t[5]=Math.cos(n),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function s(t,n,e){t[0]=1,t[1]=Math.tan(n),t[2]=0,t[3]=0,t[4]=Math.tan(e),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function u(t,n,e){t[0]=n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function c(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}function f(t,n){n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]}function p(){var t=new Float32Array(16),n=new Float32Array(16),e=new Float32Array(16);return c(t),{data:t,asCSS:function(){for(var n="matrix3d(",e=0;15>e;++e)n+=Math.abs(t[e])<1e-4?"0,":t[e].toFixed(10)+",";return n+=Math.abs(t[15])<1e-4?"0)":t[15].toFixed(10)+")"},clear:function(){c(t)},translate:function(o,a,s){return f(t,n),r(e,o,a,s),i(n,e,t),this},rotateX:function(r){return f(t,n),o(e,r),i(n,e,t),this},rotateY:function(r){return f(t,n),l(e,r),i(n,e,t),this},rotateZ:function(r){return f(t,n),a(e,r),i(n,e,t),this},scale:function(r,o){return f(t,n),u(e,r,o),i(n,e,t),this},skew:function(r,o){return f(t,n),s(e,r,o),i(n,e,t),this}}}var l=function(t,n){t[0]=Math.cos(n),t[1]=0,t[2]=Math.sin(n),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(n),t[9]=0,t[10]=Math.cos(n),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1};n.exports=p},{}],7:[function(t,n,e){"use strict";function i(t){return"from"+t.charAt(0).toUpperCase()+t.slice(1)}function r(t,n,e){if(!t)return t;var r=o.cloneObject(t),a=o.isFunction(t.allDone),s=o.isFunction(t.complete);(s||a)&&(r.complete=function(){s&&t.complete.call(this,n,e),a&&n===e-1&&t.allDone()}),o.isFunction(t.valueFeeder)&&(r.valueFeeder=function(i,r){return t.valueFeeder(i,r,n,e)}),o.isFunction(t.easing)&&(r.easing=function(i){return t.easing(i,n,e)}),o.isFunction(t.start)&&(r.start=function(){return t.start(n,e)}),o.isFunction(t.update)&&(r.update=function(i){return t.update(i,n,e)});var u=Object.keys(c).concat(["perspective","transformOrigin","duration","delay"]);return u.forEach(function(a){var s=i(a);o.isFunction(t[a])&&(r[a]=t[a](n,e)),o.isFunction(t[s])&&(r[s]=t[s](n,e))}),r}var o=t("./utils.js"),a=1,s=2,u=3,c={position:[u,[0,0,0]],rotation:[u,[0,0,0]],rotationPost:[u,[0,0,0]],skew:[s,[0,0]],scale:[s,[1,1]],scalePost:[s,[1,1]],opacity:[a],width:[a],height:[a]};n.exports={tweenableProperties:c,fromPrefixed:i,preprocessOptions:r,types:{SCALAR:a,ARRAY_2:s,ARRAY_3:u}}},{"./utils.js":10}],8:[function(t,n,e){"use strict";function i(t,n){var e=o(),r={opacity:void 0,width:void 0,height:void 0,perspective:void 0},s={clone:function(){var t=this,n={};return Object.keys(a).forEach(function(e){var i=a[e][0];t[e]&&(n[e]=i===u.SCALAR?t[e]:t[e].slice(0))}),i(n)},asMatrix:function(){var t=e;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return r.opacity=this.opacity,r.width=this.width+"px",r.height=this.height+"px",r.perspective=this.perspective,r}};return Object.keys(a).forEach(function(e){n?s[e]=c.optionOrDefault(t[e],a[e][1]):s[e]=t[e]}),s}function r(t,n,e){var r=n&&n.clone()||i({},!0),o=e?s:function(t){return t};return Object.keys(a).forEach(function(n){r[n]=c.optionOrDefault(t[o(n)],r[n]),r[n]&&r[n].slice&&(r[n]=r[n].slice())}),r}var o=t("./matrix.js"),a=t("./properties.js").tweenableProperties,s=t("./properties.js").fromPrefixed,u=t("./properties.js").types,c=t("./utils.js");n.exports={createState:i,stateFromOptions:r}},{"./matrix.js":6,"./properties.js":7,"./utils.js":10}],9:[function(t,n,e){"use strict";function i(t,n,e){function i(t,n,e,i,r){var o=n[i][0]-t[i][0],a=n[i][1]-t[i][1],s=n[i][2]-t[i][2];e[i][0]=t[i][0]+r*o,e[i][1]=t[i][1]+r*a,e[i][2]=t[i][2]+r*s}function r(t,n,e,i,r){var o=n[i][0]-t[i][0],a=n[i][1]-t[i][1];e[i][0]=t[i][0]+r*o,e[i][1]=t[i][1]+r*a}function o(t,n,e,i,r){var o=n[i]-t[i];e[i]=t[i]+r*o}var u=t,c=n,f=e,p=[];return Object.keys(a).forEach(function(t){void 0!==n[t]&&p.push(t)}),{tween:function(t){p.forEach(function(n){var e=a[n][0];e===s.ARRAY_3?i(u,c,f,n,t):e===s.ARRAY_2?r(u,c,f,n,t):o(u,c,f,n,t)})},asMatrix:function(){return f.asMatrix()},getProperties:function(){return f.getProperties()},result:function(){return f},setReverse:function(){var t=u;u=c,c=t}}}function r(t,n,e,i){var r=t(0,o()),a=n,s=e,u=i,c=!1;return{tween:function(n){c&&(n=1-n),r.clear(),r=t(n,r);var e=s.width-a.width,i=s.height-a.height,o=s.opacity-a.opacity;void 0!==s.width&&(u.width=a.width+n*e),void 0!==s.height&&(u.height=a.height+n*i),void 0!==s.opacity&&(u.opacity=a.opacity+n*o)},asMatrix:function(){return r},getProperties:function(){return u.getProperties()},setReverse:function(){c=!0}}}var o=t("./matrix.js"),a=t("./properties").tweenableProperties,s=t("./properties").types;n.exports={createStateTweener:i,createValueFeederTweener:r}},{"./matrix.js":6,"./properties":7}],10:[function(t,n,e){"use strict";function i(t){return"function"==typeof t}function r(t,n){return void 0===t?n:t}function o(t,n,e,i,r){var o=i?"perspective("+i+"px) ":"",a=n.asCSS(),s=r?r:"";e?t.style[e]=s+o+a:t.style.transform=s+o+a}function a(t){if(!t)return t;var n={};for(var e in t)n[e]=t[e];return n}function s(t){for(var n=t;n.parentNode;)n=n.parentNode;return n}var u=function(t,n){for(var e in n)"perspective"!==e&&(t.style[e]=n[e])};n.exports={optionOrDefault:r,updateElementTransform:o,updateElementProperties:u,isFunction:i,cloneObject:a,findUltimateAncestor:s}},{}]},{},[5])(5)});
